<!DOCTYPE HTML>
<html lang="de">
<head>
    <title>VideoChop: Test-Case Video-Controls</title>
    <meta charset="utf-8">
    <script src="../../videochop/js/lib/jquery-2.1.1.min.js"></script>
</head>
<body>

<div class="test-container">
    <div class="video">
        <video id="testvideo"><source src="../format-test/videos/big_buck_bunny.webm" type="video/webm"></video>
    </div>
    <div class="controls">
        <button class="control" id="playpause">Play/Pause</button>
        <button class="control" id="stop">Stop</button>
        <button class="control" id="normal">Normal Speed</button>
        <button class="control" id="forward">Forward 4x Speed</button>
        <button class="control" id="backward">Backward</button>
    </div>
    </div>
</div>
<script>
    $( document ).ready(function() {
        $(".contorls").on("click", ".button",function() {
            $this = $(this);
            if ($this.hasClass("playpause")) {
                playPause();
            }
            if ($this.hasClass("stop")) {
                videoStop();
            }
            if ($this.hasClass("normal")) {
                videoNormal();
            }
            if ($this.hasClass("forward")) {
                videoForward();
            }
            if ($this.hasClass("backward")) {
                videoBackward();
            }

        var testvideo = document.getElementById("testvideo");
        var intervalRewind;

        function playPause() {
            if (testvideo.paused)
                testvideo.play();
            else
                testvideo.pause();

            clearInterval(intervalRewind);
        }

        function videoStop() {
            if (testvideo.paused)
                testvideo.currentTime = 0;
            else
                testvideo.pause();
                testvideo.currentTime = 0;
            clearInterval(intervalRewind);
        }

        function videoForward() {
            if (testvideo.paused)
                testvideo.playbackRate = 4;
            else
                playPause();
                testvideo.playbackRate = 4;
            playPause();
            clearInterval(intervalRewind);
        }

        function videoNormal() {
            if (testvideo.paused)
                testvideo.playbackRate = 1;
            else
                playPause();
            testvideo.playbackRate = 1;
            playPause();
            clearInterval(intervalRewind);
        }


        // funktion adaptiert von http://jsfiddle.net/bplumb/h9EVQ/8/
        // etwas unsauber aber anders nicht wirklich machbar !
        function videoBackward() {
            intervalRewind = setInterval(function(){
                testvideo.playbackRate = 1.0;
                if(testvideo.currentTime == 0){
                    clearInterval(intervalRewind);
                    testvideo.pause();
                }
                else{
                    testvideo.currentTime += -.1;
                }
            },30);
        }
    });
</script>
</body>
</html>